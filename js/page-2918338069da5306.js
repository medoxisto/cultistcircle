(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{5074:function(e,t,s){Promise.resolve().then(s.bind(s,5925))},5925:function(e,t,s){"use strict";s.d(t,{App:function(){return eJ}});var a=s(7437),r=s(2265),l=s(7138),i=s(6013),n=s(1538),o=s(2218),c=s(7440);let d=(0,o.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),u=r.forwardRef((e,t)=>{let{className:s,variant:r,size:l,asChild:i=!1,...o}=e,u=i?n.g7:"button";return(0,a.jsx)(u,{className:(0,c.cn)(d({variant:r,size:l,className:s})),ref:t,...o})});u.displayName="Button";var m=s(8484);let f=r.forwardRef((e,t)=>{let{className:s,orientation:r="horizontal",decorative:l=!0,...i}=e;return(0,a.jsx)(m.f,{ref:t,decorative:l,orientation:r,className:(0,c.cn)("shrink-0 bg-border","horizontal"===r?"h-[1px] w-full":"h-full w-[1px]",s),...i})});f.displayName=m.f.displayName;var h=s(9687),x=s(4258),p=s(3131),g=s(9646);let b=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(g.fC,{className:(0,c.cn)("peer inline-flex h-5 w-9 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent shadow-sm transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",s),...r,ref:t,children:(0,a.jsx)(g.bU,{className:(0,c.cn)("pointer-events-none block h-4 w-4 rounded-full bg-gray-500 shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-4 data-[state=unchecked]:translate-x-0")})})});b.displayName=g.fC.displayName;var v=s(6648),j=()=>(0,a.jsx)("div",{className:"fixed top-0 right-0 m-4 px-2 py-1 bg-blue-500 text-white text-xs font-bold rounded-full shadow-lg",children:"BETA"}),y=s(3085),N=s(4867);let w=y.fC,S=y.xz,k=y.h_;y.x8;let C=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(y.aV,{ref:t,className:(0,c.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...r})});C.displayName=y.aV.displayName;let E=r.forwardRef((e,t)=>{let{className:s,children:r,...l}=e;return(0,a.jsxs)(k,{children:[(0,a.jsx)(C,{}),(0,a.jsxs)(y.VY,{ref:t,className:(0,c.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",s),...l,children:[r,(0,a.jsxs)(y.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,a.jsx)(N.Pxu,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});E.displayName=y.VY.displayName;let R=e=>{let{className:t,...s}=e;return(0,a.jsx)("div",{className:(0,c.cn)("flex flex-col space-y-1.5 text-center sm:text-left",t),...s})};R.displayName="DialogHeader";let T=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(y.Dx,{ref:t,className:(0,c.cn)("text-lg font-semibold leading-none tracking-tight",s),...r})});T.displayName=y.Dx.displayName;let D=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(y.dk,{ref:t,className:(0,c.cn)("text-sm text-muted-foreground",s),...r})});D.displayName=y.dk.displayName;var z=s(7071);let I=z.zt,P=z.fC,A=z.xz,O=r.forwardRef((e,t)=>{let{className:s,sideOffset:r=4,...l}=e;return(0,a.jsx)(z.VY,{ref:t,sideOffset:r,className:(0,c.cn)("z-50 overflow-hidden rounded-md bg-primary px-3 py-1.5 text-xs text-primary-foreground animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s),...l})});O.displayName=z.VY.displayName;let F=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("textarea",{className:(0,c.cn)("flex min-h-[60px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",s),ref:t,...r})});F.displayName="Textarea";var _=s(6294);function V(e){let{onClose:t}=e,[s,l]=(0,r.useState)(""),[n,o]=(0,r.useState)(""),[c,d]=(0,r.useState)(!1),m=async e=>{e.preventDefault(),d(!0);try{let e=await fetch("/api/submit-feedback",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:s,description:n})}),a=await e.json();if(!e.ok)throw Error(a.error);console.log("Feedback submitted successfully",a.data),t()}catch(e){console.error("Error submitting feedback:",e)}finally{d(!1)}};return(0,a.jsxs)(i.Zb,{className:"w-full max-w-md mx-auto",children:[(0,a.jsx)(i.Ol,{children:(0,a.jsx)(i.ll,{children:"Submit Feedback or Report Issue"})}),(0,a.jsxs)("form",{onSubmit:m,children:[(0,a.jsxs)(i.aY,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{htmlFor:"type",className:"text-sm font-medium",children:"Type"}),(0,a.jsxs)(_.Ph,{onValueChange:l,required:!0,children:[(0,a.jsx)(_.i4,{id:"type",children:(0,a.jsx)(_.ki,{placeholder:"Select type"})}),(0,a.jsxs)(_.Bw,{children:[(0,a.jsx)(_.Ql,{value:"Issue",children:"Issue"}),(0,a.jsx)(_.Ql,{value:"Feature",children:"Feature"})]})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{htmlFor:"description",className:"text-sm font-medium",children:"Description"}),(0,a.jsx)(F,{id:"description",placeholder:"Please provide a detailed description",value:n,onChange:e=>o(e.target.value),required:!0,className:"min-h-[100px]"})]})]}),(0,a.jsxs)(i.eW,{className:"flex justify-between",children:[(0,a.jsx)(u,{type:"button",variant:"outline",onClick:t,children:"Close"}),(0,a.jsx)(u,{type:"submit",disabled:c,children:c?"Submitting...":"Submit"})]})]})]})}var M=s(5188),Z=s(8597),L=s(6884),U=s(6934),B=s(883),Y=s(4697),H=s(6578),W=s(8532);let G=W.fC,J=W.xz;W.ZA,W.Uv,W.Tr,W.Ee,r.forwardRef((e,t)=>{let{className:s,inset:r,children:l,...i}=e;return(0,a.jsxs)(W.fF,{ref:t,className:(0,c.cn)("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",r&&"pl-8",s),...i,children:[l,(0,a.jsx)(N.XCv,{className:"ml-auto h-4 w-4"})]})}).displayName=W.fF.displayName,r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(W.tu,{ref:t,className:(0,c.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s),...r})}).displayName=W.tu.displayName;let Q=r.forwardRef((e,t)=>{let{className:s,sideOffset:r=4,...l}=e;return(0,a.jsx)(W.Uv,{children:(0,a.jsx)(W.VY,{ref:t,sideOffset:r,className:(0,c.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md","data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s),...l})})});Q.displayName=W.VY.displayName;let q=r.forwardRef((e,t)=>{let{className:s,inset:r,...l}=e;return(0,a.jsx)(W.ck,{ref:t,className:(0,c.cn)("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",r&&"pl-8",s),...l})});q.displayName=W.ck.displayName,r.forwardRef((e,t)=>{let{className:s,children:r,checked:l,...i}=e;return(0,a.jsxs)(W.oC,{ref:t,className:(0,c.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),checked:l,...i,children:[(0,a.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(W.wU,{children:(0,a.jsx)(N.nQG,{className:"h-4 w-4"})})}),r]})}).displayName=W.oC.displayName,r.forwardRef((e,t)=>{let{className:s,children:r,...l}=e;return(0,a.jsxs)(W.Rk,{ref:t,className:(0,c.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),...l,children:[(0,a.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(W.wU,{children:(0,a.jsx)(N.jXb,{className:"h-4 w-4 fill-current"})})}),r]})}).displayName=W.Rk.displayName,r.forwardRef((e,t)=>{let{className:s,inset:r,...l}=e;return(0,a.jsx)(W.__,{ref:t,className:(0,c.cn)("px-2 py-1.5 text-sm font-semibold",r&&"pl-8",s),...l})}).displayName=W.__.displayName;let $=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(W.Z0,{ref:t,className:(0,c.cn)("-mx-1 my-1 h-px bg-muted",s),...r})});$.displayName=W.Z0.displayName;var X=s(3558),K=s(5502),ee=r.memo(e=>{let{items:t,selectedItem:s,onSelect:l,onCopy:i,onPin:n,isPinned:o,overriddenPrice:d,isAutoPickActive:m,overriddenPrices:f,isExcluded:h,onToggleExclude:x,excludedItems:p}=e,[g,b]=(0,r.useState)(""),[v,j]=(0,r.useState)(!1),[y,N]=(0,r.useState)(""),[w,S]=(0,r.useState)(!1);(0,r.useEffect)(()=>{s&&void 0!==d?(N(d.toString()),S(!0)):(N(""),S(!1))},[s,d]);let k=(0,r.useMemo)(()=>new H.Z(t,{keys:["name"],threshold:.3,includeScore:!1}),[t]),[C,E]=(0,r.useState)(g);(0,r.useEffect)(()=>{let e=setTimeout(()=>{E(g)},300);return()=>{clearTimeout(e)}},[g]);let R=(0,r.useMemo)(()=>v&&!C?t.filter(e=>e.price>0):C?k.search(C).map(e=>e.item).filter(e=>e.price>0):[],[C,k,v,t]),T=(0,r.useCallback)(e=>{let t;e&&(void 0!==d?t=d:y&&(t=Number(y))),l(e,t),b(""),j(!1),N(null!=t?t.toString():"")},[l,d,y]),D=(0,r.useCallback)(()=>{o&&n(),T(null)},[o,n,T]),z=(0,r.useCallback)(()=>{N(""),S(!1),s&&l(s,null)},[l,s]),F=(0,r.useCallback)(e=>{let t=e.target.value;/^\d*$/.test(t)&&(N(t),s&&t&&w&&l(s,Number(t)||0))},[l,s,w]),_=(0,r.useCallback)(()=>{S(e=>!e),!w&&s&&y?l(s,Number(y)):w&&s&&(l(s,null),N(""))},[w,l,s,y]),V=(0,r.useCallback)(()=>{x()},[x]),W=(0,r.useCallback)(e=>{let{index:t,style:s}=e,r=R[t],l=f[r.uid],i=void 0!==l?l:r.price,n=void 0!==l,o=p.has(r.uid);return(0,a.jsxs)(P,{children:[(0,a.jsx)(A,{asChild:!0,children:(0,a.jsxs)("li",{style:s,onMouseDown:e=>e.preventDefault(),onMouseUp:()=>T(r),className:"p-2 hover:bg-gray-600 cursor-pointer text-white flex flex-col",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"truncate",children:r.name})," ",o&&(0,a.jsx)("span",{className:"text-red-500 ml-2",children:"Excluded"})]}),(0,a.jsxs)("div",{className:"text-gray-400 text-sm mt-1",children:[(0,a.jsxs)("p",{children:["Base Value: ₱",r.basePrice.toLocaleString()]}),(0,a.jsxs)("p",{children:["Estimated Flea Price:"," ",(0,a.jsxs)("span",{className:n?"text-yellow-300 font-bold":"",children:["₱",i.toLocaleString()]}),n&&(0,a.jsx)("span",{className:"text-gray-400 ml-1",children:"(Overridden)"})]})]})]})}),(0,a.jsx)(O,{children:(0,a.jsxs)("div",{children:[(0,a.jsxs)("p",{children:["Base Value: ₱",r.basePrice.toLocaleString()]}),(0,a.jsxs)("p",{children:["Estimated Flea Price:"," ",(0,a.jsxs)("span",{className:n?"text-yellow-300 font-bold":"",children:["₱",i.toLocaleString()]}),n&&(0,a.jsx)("span",{className:"text-gray-400 ml-1",children:"(Overridden)"})]}),o&&(0,a.jsx)("p",{className:"text-red-500",children:"This item is excluded."})]})})]},r.uid)},[R,T,f,p]);return(0,a.jsx)(I,{children:(0,a.jsxs)("div",{className:"relative w-full mb-2",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("input",{onClick:()=>j(!0),onFocus:()=>j(!0),onBlur:()=>setTimeout(()=>j(!1),100),type:"text",value:s?s.name:g,onChange:e=>{b(e.target.value),s&&T(null)},placeholder:"Search items...",className:"w-full p-2 pr-24 bg-gray-700 text-white rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 ".concat(o?"border-2 border-yellow-500":"")}),s&&(0,a.jsx)("div",{className:"absolute right-2 top-1/2 transform -translate-y-1/2",children:(0,a.jsxs)(G,{children:[(0,a.jsx)(J,{asChild:!0,children:(0,a.jsxs)(u,{size:"icon",variant:"outline",className:"h-8 w-8 bg-gray-500 hover:bg-gray-600 text-white",children:[(0,a.jsx)(M.Z,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"More"})]})}),(0,a.jsxs)(Q,{className:"bg-primary text-secondary",align:"end",children:[(0,a.jsxs)(q,{onSelect:n,children:[(0,a.jsx)(Z.Z,{className:"mr-2 h-4 w-4"}),(0,a.jsx)("span",{children:o?"Unpin Item":"Pin Item"})]}),(0,a.jsxs)(q,{onSelect:i,children:[(0,a.jsx)(L.Z,{className:"mr-2 h-4 w-4"}),(0,a.jsx)("span",{children:"Copy Item Name"})]}),(0,a.jsxs)(q,{onSelect:_,children:[(0,a.jsx)(U.Z,{className:"mr-2 h-4 w-4"}),(0,a.jsx)("span",{children:w?"Disable Flea Override":"Enable Flea Override"})]}),(0,a.jsxs)(q,{onSelect:V,children:[(0,a.jsx)(B.Z,{className:"mr-2 h-4 w-4"}),(0,a.jsx)("span",{children:h?"Include Item":"Exclude from Autopick"})]}),(0,a.jsx)($,{}),(0,a.jsxs)(q,{onSelect:D,children:[(0,a.jsx)(Y.Z,{className:"mr-2 h-4 w-4 text-red-500"}),(0,a.jsx)("span",{className:"text-red-500",children:"Remove Item"})]})]})]})})]}),!s&&v&&(0,a.jsxs)("div",{className:"absolute z-10 w-full mt-1 bg-gray-700 rounded-md shadow-lg max-h-60 overflow-hidden",children:[(0,a.jsx)(K.ZP,{disableHeight:!0,children:e=>{let{width:t}=e;return(0,a.jsx)(X.t7,{height:240,itemCount:R.length,itemSize:80,width:t,children:W})}}),0===R.length&&(0,a.jsx)("div",{className:"p-2 text-gray-400",children:"No items found."})]}),s&&(0,a.jsxs)("div",{className:"text-sm text-gray-400 mt-1 flex flex-col sm:flex-row justify-between items-start sm:items-center",children:[" ",(0,a.jsxs)("span",{children:["Base: ₱",s.basePrice.toLocaleString()]}),(0,a.jsxs)("span",{className:d?"text-blue-500":"",children:["Flea: ₱",(d||s.price).toLocaleString()]}),(0,a.jsxs)("span",{children:["Updated: ",(0,c.D)(s.updated)]}),h&&(0,a.jsx)("span",{className:"text-red-500",children:"Excluded from Autopick"})]}),s&&w&&!m&&(0,a.jsxs)("div",{className:"mt-1 flex items-center",children:[(0,a.jsx)("input",{type:"text",inputMode:"numeric",pattern:"[0-9]*",value:y||"",onChange:F,placeholder:"Override flea price",className:"w-1/2 p-1 bg-gray-700 text-white rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"}),(Number(y)>0||void 0!==d)&&(0,a.jsx)("button",{onClick:z,className:"ml-2 p-1 bg-red-500 text-white rounded-md hover:bg-red-600 focus:outline-none focus:ring-2 focus:ring-red-500",title:"Clear Price Override Input",children:(0,a.jsx)(Y.Z,{size:16})})]})]})})}),et=s(8364);let es=(0,o.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),ea=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(et.f,{ref:t,className:(0,c.cn)(es(),s),...r})});ea.displayName=et.f.displayName;let er=r.forwardRef((e,t)=>{let{className:s,type:r,...l}=e;return(0,a.jsx)("input",{type:r,className:(0,c.cn)("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-sm shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",s),ref:t,...l})});er.displayName="Input";var el=s(7553);let ei=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsxs)(el.fC,{ref:t,className:(0,c.cn)("relative flex w-full touch-none select-none items-center",s),...r,children:[(0,a.jsx)(el.fQ,{className:"relative h-1.5 w-full grow overflow-hidden rounded-full bg-primary/20",children:(0,a.jsx)(el.e6,{className:"absolute h-full bg-primary"})}),(0,a.jsx)(el.bU,{className:"block h-4 w-4 rounded-full border border-primary/50 bg-white shadow transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50"})]})});ei.displayName=el.fC.displayName;var en=s(1282),eo=s(2649);function ec(e){let{value:t,onChange:s}=e,[l,i]=(0,r.useState)(!1),[n,o]=(0,r.useState)(!1),c=(0,r.useRef)(null);(0,r.useEffect)(()=>{350001!==t&&4e5!==t?i(!0):i(!1)},[t]),(0,r.useEffect)(()=>{let e=eo.Z.get("userThreshold");e&&s(Number(e))},[s]),(0,r.useEffect)(()=>{let e=e=>{c.current&&!c.current.contains(e.target)&&o(!1)};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[]);let d=e=>{s(e),i(!1),eo.Z.set("userThreshold",e.toString(),{expires:365})};return(0,a.jsxs)("div",{ref:c,className:"w-64 bg-gray-700 text-white rounded-lg shadow-md transition-colors duration-200",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 cursor-pointer border-b border-border",onClick:()=>{o(!n)},children:[(0,a.jsx)(ea,{className:"text-sm font-semibold",children:"Threshold:"}),(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("span",{className:"mr-2",children:new Intl.NumberFormat("ru-RU",{style:"currency",currency:"RUB",maximumFractionDigits:0}).format(t)}),(0,a.jsx)(en.Z,{className:"h-4 w-4 text-muted-secondary"})]})]}),n&&(0,a.jsxs)("div",{className:"p-3",children:[(0,a.jsx)(ei,{value:[t],onValueChange:e=>{let t=e[0];s(t),eo.Z.set("userThreshold",t.toString(),{expires:365})},max:5e5,step:1e3,className:"mb-4"}),(0,a.jsxs)("div",{className:"flex justify-between mb-2",children:[(0,a.jsx)(I,{children:(0,a.jsxs)(P,{children:[(0,a.jsx)(A,{asChild:!0,children:(0,a.jsx)(u,{variant:350001===t?"default":"outline",size:"sm",onClick:()=>d(350001),className:"text-sm",children:"₽350,001"})}),(0,a.jsx)(O,{children:(0,a.jsx)("div",{children:"14 hours | High-value item reward"})})]})}),(0,a.jsx)(I,{children:(0,a.jsxs)(P,{children:[(0,a.jsx)(A,{asChild:!0,children:(0,a.jsx)(u,{variant:4e5===t?"default":"outline",size:"sm",onClick:()=>d(4e5),className:"text-sm",children:"₽400,000"})}),(0,a.jsx)(O,{children:(0,a.jsx)("div",{children:"6 hours (25% success chance) | Active tasks or hideout item"})})]})})]}),l&&(0,a.jsx)(er,{type:"number",value:t,onChange:e=>{let t=Number(e.target.value),a=isNaN(t)?0:t;s(a),eo.Z.set("userThreshold",a.toString(),{expires:365})},className:"w-full mt-2 bg-background text-secondary"})]})]})}var ed=s(404),eu=s(6900),em=s(4378),ef=s(9497);let eh=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(ef.fC,{className:(0,c.cn)("grid gap-2",s),...r,ref:t})});eh.displayName=ef.fC.displayName;let ex=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(ef.ck,{ref:t,className:(0,c.cn)("aspect-square h-4 w-4 rounded-full border border-primary text-primary shadow focus:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",s),...r,children:(0,a.jsx)(ef.z$,{className:"flex items-center justify-center",children:(0,a.jsx)(N.nQG,{className:"h-3.5 w-3.5 fill-primary"})})})});ex.displayName=ef.ck.displayName;var ep=s(3943);let eg=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(ep.fC,{ref:t,className:(0,c.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-primary shadow focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",s),...r,children:(0,a.jsx)(ep.z$,{className:(0,c.cn)("flex items-center justify-center text-current"),children:(0,a.jsx)(N.nQG,{className:"h-4 w-4"})})})});eg.displayName=ep.fC.displayName;let eb=new Set(["Repair","Keys","Weapon"]);function ev(e){let{onClose:t,onSortChange:s,currentSortOption:l,selectedCategories:i,onCategoryChange:n,allCategories:o,onHardReset:c}=e,[d,m]=(0,r.useState)(l),[f,h]=(0,r.useState)("filter"),x=(0,r.useRef)(null);(0,r.useEffect)(()=>{s(d)},[d,s]),(0,r.useEffect)(()=>{document.body.style.overflow="hidden";let e=e=>{x.current&&!x.current.contains(e.target)&&t()};return document.addEventListener("pointerdown",e),()=>{document.body.style.overflow="",document.removeEventListener("pointerdown",e)}},[t]);let p=e=>{if(eb.has(e))return;let t=i.includes(e)?i.filter(t=>t!==e):[...i,e];t.length>0&&n(t)},g=Array.from(eb).join(", ");return(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center",children:(0,a.jsxs)("div",{ref:x,className:"flex sm:w-[500px] w-[350px] max-h-[90vh] h-[550px] rounded-lg border bg-slate-800 shadow-lg relative",children:[(0,a.jsx)(u,{variant:"ghost",className:"absolute top-2 right-2",onClick:t,children:(0,a.jsx)(Y.Z,{className:"h-5 w-5"})}),(0,a.jsxs)("div",{className:"flex w-[60px] flex-col items-center border-r pt-4 pb-4 h-full",children:[(0,a.jsx)(u,{variant:"ghost",className:"w-full p-2 ".concat("filter"===f?"bg-gray-700":""),title:"Item Filter",onClick:()=>h("filter"),children:(0,a.jsx)(ed.Z,{className:"h-5 w-5"})}),(0,a.jsx)(u,{variant:"ghost",className:"w-full p-2 ".concat("sort"===f?"bg-gray-700":""),title:"Sort Options",onClick:()=>h("sort"),children:(0,a.jsx)(eu.Z,{className:"h-5 w-5"})}),(0,a.jsx)(u,{variant:"ghost",className:"w-full p-2 mt-auto ".concat("reset"===f?"bg-gray-700":""),title:"Reset",onClick:()=>h("reset"),children:(0,a.jsx)(em.Z,{className:"h-5 w-5"})})]}),(0,a.jsxs)("div",{className:"flex-1 p-6 overflow-y-auto",children:["sort"===f&&(0,a.jsxs)("div",{className:"h-full",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold mb-4",children:"Sort Options"}),(0,a.jsxs)(eh,{value:d,onValueChange:m,children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(ex,{value:"az",id:"az",className:"az"===d?"bg-white":""}),(0,a.jsx)(ea,{htmlFor:"az",children:"A-Z"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(ex,{value:"base-value",id:"base-value",className:"base-value"===d?"bg-blue-500":""}),(0,a.jsx)(ea,{htmlFor:"base-value",children:"Base Value: Low to High"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(ex,{value:"ratio",id:"ratio",className:"ratio"===d?"bg-green-500":""}),(0,a.jsx)(ea,{htmlFor:"ratio",children:"Value-to-Cost Ratio"})]})]})]}),"filter"===f&&(0,a.jsxs)("div",{className:"h-full relative",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold mb-4",children:"Item Filter"}),(0,a.jsxs)("div",{className:"text-sm text-yellow-500 mb-4 bg-yellow-100 bg-opacity-20 p-2 rounded",children:["Warning: ",g," are disabled due to their variable usage/durability impacting prices."]}),o.map(e=>(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(eg,{checked:i.includes(e),disabled:eb.has(e),onCheckedChange:()=>p(e),className:"border-gray-500"}),(0,a.jsx)(ea,{children:e})]},e)),(0,a.jsx)(u,{variant:"destructive",className:"absolute bottom-4 right-4 px-4 py-2 rounded",onClick:()=>{n(["Barter","Provisions","Containers","Maps","Suppressors"])},children:"Reset Filters"})]}),"reset"===f&&(0,a.jsxs)("div",{className:"h-full flex flex-col justify-center items-center",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold mb-4",children:"Hard Reset"}),(0,a.jsx)("p",{className:"text-center mb-4",children:"Reset all settings to their default values. (including cookies and local cache)"}),(0,a.jsx)(u,{variant:"destructive",className:"w-full",onClick:c,children:"Reset App"})]})]})]})})}function ej(e){let{className:t,...s}=e;return(0,a.jsx)("div",{className:(0,c.cn)("animate-pulse rounded-md bg-primary/10",t),...s})}let ey=0,eN=new Map,ew=e=>{if(eN.has(e))return;let t=setTimeout(()=>{eN.delete(e),eE({type:"REMOVE_TOAST",toastId:e})},1e6);eN.set(e,t)},eS=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:s}=t;return s?ew(s):e.toasts.forEach(e=>{ew(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===s||void 0===s?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},ek=[],eC={toasts:[]};function eE(e){eC=eS(eC,e),ek.forEach(e=>{e(eC)})}function eR(e){let{...t}=e,s=(ey=(ey+1)%Number.MAX_SAFE_INTEGER).toString(),a=()=>eE({type:"DISMISS_TOAST",toastId:s});return eE({type:"ADD_TOAST",toast:{...t,id:s,open:!0,onOpenChange:e=>{e||a()}}}),{id:s,dismiss:a,update:e=>eE({type:"UPDATE_TOAST",toast:{...e,id:s}})}}function eT(){let[e,t]=r.useState(eC);return r.useEffect(()=>(ek.push(t),()=>{let e=ek.indexOf(t);e>-1&&ek.splice(e,1)}),[e]),{...e,toast:eR,dismiss:e=>eE({type:"DISMISS_TOAST",toastId:e})}}var eD=s(3539);let ez=eD.zt,eI=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(eD.l_,{ref:t,className:(0,c.cn)("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",s),...r})});eI.displayName=eD.l_.displayName;let eP=(0,o.j)("group pointer-events-auto relative flex w-full items-center justify-between space-x-2 overflow-hidden rounded-md border p-4 pr-6 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-slate-950 text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),eA=r.forwardRef((e,t)=>{let{className:s,variant:r,...l}=e;return(0,a.jsx)(eD.fC,{ref:t,className:(0,c.cn)(eP({variant:r}),s),...l})});eA.displayName=eD.fC.displayName,r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(eD.aU,{ref:t,className:(0,c.cn)("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium transition-colors hover:bg-secondary focus:outline-none focus:ring-1 focus:ring-ring disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",s),...r})}).displayName=eD.aU.displayName;let eO=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(eD.x8,{ref:t,className:(0,c.cn)("absolute right-1 top-1 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-1 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",s),"toast-close":"",...r,children:(0,a.jsx)(N.Pxu,{className:"h-4 w-4"})})});eO.displayName=eD.x8.displayName;let eF=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(eD.Dx,{ref:t,className:(0,c.cn)("text-sm font-semibold [&+div]:text-xs",s),...r})});eF.displayName=eD.Dx.displayName;let e_=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(eD.dk,{ref:t,className:(0,c.cn)("text-sm opacity-90",s),...r})});function eV(){let{toasts:e}=eT();return(0,a.jsxs)(ez,{children:[e.map(function(e){let{id:t,title:s,description:r,action:l,...i}=e;return(0,a.jsxs)(eA,{...i,children:[(0,a.jsxs)("div",{className:"grid gap-1",children:[s&&(0,a.jsx)(eF,{children:s}),r&&(0,a.jsx)(e_,{children:r})]}),l,(0,a.jsx)(eO,{})]},t)}),(0,a.jsx)(eI,{})]})}e_.displayName=eD.dk.displayName;var eM=s(4446),eZ=s(5729),eL=s(7592);let eU=[{target:"#help",title:"Help",content:"Click here to open the help pane."},{target:"#settings",title:"Settings",content:"Click here to open the settings pane. ⚠️ If you are having problems with the app, try resetting from within the settings."},{target:"#pvp-toggle",title:"PVP Toggle",content:"Toggle between PVP and PVE item lists and flea market prices."},{target:"#threshold",title:"Threshold Setting",content:"Set your threshold. ≥350,001 triggers a 14-hour timer for a high-value item, and ≥400,000 have a 25% chance of a 6-hour timer which can be a quest/hideout item."},{target:"#auto-select",title:"Auto Select",content:"Automatically select the best value-to-price items based on your threshold."},{target:"#search-items",title:"Search Items",content:"Use the Item Selector to search and choose items based on their Base Value. Pin to lock-in, override flea prices if needed, and exclude items from Autopick calculations."},{target:"#clear-item-fields",title:"Clear Selected Items",content:"Clears all selected items."},{target:"#reset-overrides",title:"Reset overrides",content:"Resets all flea price overrides and excluded items."},{target:"#sacrifice-value",title:"Sacrifice Value",content:"This is the TOTAL base value of the selected items. (You can find more info about base values via tarkov wiki)."}];function eB(){let[e,t]=(0,r.useState)(0),[s,l]=(0,r.useState)(!1),[i,n]=(0,r.useState)(null);(0,r.useEffect)(()=>{let e=()=>{"true"!==localStorage.getItem("tourCompleted")&&l(!0)};if("complete"!==document.readyState)return window.addEventListener("load",e),()=>window.removeEventListener("load",e);e()},[]),(0,r.useLayoutEffect)(()=>{let t=()=>{if(s&&e<eU.length){let t=document.querySelector(eU[e].target);t?(n(t.getBoundingClientRect()),t.scrollIntoView({behavior:"smooth",block:"center"})):(console.warn("Element not found for selector: ".concat(eU[e].target)),n(null))}};return t(),window.addEventListener("resize",t),window.addEventListener("scroll",t),()=>{window.removeEventListener("resize",t),window.removeEventListener("scroll",t)}},[e,s]);let o=()=>{l(!1),localStorage.setItem("tourCompleted","true")};if(!s)return null;let c=i?{top:i.bottom+10>window.innerHeight/2?i.top-10-250:i.bottom+10,left:window.innerWidth<=768?"0%":"25%",transform:"translateX(-50%)"}:{};return(0,a.jsxs)("div",{className:"fixed inset-0 z-50 pointer-events-none",children:[(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50"}),i&&(0,a.jsx)("div",{className:"absolute border-4 pointer-events-none border-yellow-300 border-dashed animate-pulse",style:{top:i.top-4,left:i.left-4,width:i.width+8,height:i.height+8,borderRadius:"4px",boxSizing:"border-box"}}),(0,a.jsx)(eM.M,{children:(0,a.jsxs)(eZ.E.div,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},exit:{opacity:0,y:-50},transition:{duration:.3},className:"fixed z-50 w-full max-w-lg p-6 mx-auto rounded-lg shadow-lg pointer-events-auto bg-primary",style:c,children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-secondary",children:eU[e].title}),(0,a.jsx)(u,{variant:"ghost",size:"icon",onClick:o,children:(0,a.jsx)(Y.Z,{className:"w-6 h-6"})})]}),(0,a.jsx)("p",{className:"mb-6 text-muted-foreground",children:eU[e].content}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("span",{className:"text-sm text-muted-foreground",children:["Step ",e+1," of ",eU.length]}),(0,a.jsxs)("div",{className:"space-x-2",children:[(0,a.jsx)(u,{variant:"outline",onClick:o,children:"Skip"}),(0,a.jsxs)(u,{onClick:()=>{e<eU.length-1?t(e+1):(l(!1),localStorage.setItem("tourCompleted","true"))},children:[e===eU.length-1?"Finish":"Next",(0,a.jsx)(eL.Z,{className:"w-4 h-4 ml-2"})]})]})]})]},e)})]})}async function eY(e,t,s,a,r,l,i,n,o,c){localStorage.clear();try{(await fetch("/api/expire-cookies")).ok?console.log("Cookies cleared successfully"):console.error("Failed to clear cookies")}catch(e){console.error("Error clearing cookies:",e)}e([,,,,,].fill(null)),t([,,,,,].fill(!1)),s(o),a("az"),r(350001),l(new Set),i({}),await n(),c({title:"Reset Successful",description:"All settings have been reset and data has been cleared."})}let eH=(0,s(7818).default)(()=>s.e(841).then(s.bind(s,2841)),{loadableGenerated:{webpack:()=>[2841]},ssr:!1,loading:()=>(0,a.jsx)("div",{children:"Loading ad..."})}),eW="overriddenPrices",eG="1.0.1";function eJ(){let[e,t]=(0,r.useState)(!1),[s,n]=(0,r.useState)([,,,,,].fill(null)),[o,c]=(0,r.useState)(!1),[d,m]=(0,r.useState)(!1),[g,y]=(0,r.useState)([,,,,,].fill(!1)),[N,k]=(0,r.useState)(!1),[C,z]=(0,r.useState)(()=>localStorage.getItem("sortOption")||"az"),F=["Barter","Provisions","Containers","Maps","Suppressors"],[_,M]=(0,r.useState)(()=>{try{let e=localStorage.getItem("selectedCategories");if(e)return JSON.parse(e)}catch(e){console.error("Error parsing selectedCategories from localStorage",e)}return F}),[Z,L]=(0,r.useState)(!1),U=(0,r.useCallback)(e=>{M(e),localStorage.setItem("selectedCategories",JSON.stringify(e))},[]),B=(0,r.useCallback)(e=>{z(e),localStorage.setItem("sortOption",e)},[]),[Y,H]=(0,r.useState)(350001);(0,r.useEffect)(()=>{let e=eo.Z.get("userThreshold");e&&H(Number(e))},[]);let[W,G]=(0,r.useState)([]),[J,Q]=(0,r.useState)(!0),[q,$]=(0,r.useState)(null),X=(0,r.useRef)(!1),[K,et]=(0,r.useState)(new Set),[es,ea]=(0,r.useState)(()=>{try{let e=localStorage.getItem(eW);if(e)return JSON.parse(e)}catch(e){console.error("Error loading overriddenPrices from localStorage",e)}return{}});(0,r.useEffect)(()=>{try{localStorage.setItem(eW,JSON.stringify(es))}catch(e){console.error("Error saving overriddenPrices to localStorage",e)}},[es]);let[er,el]=(0,r.useState)(null),[ei,en]=(0,r.useState)("N/A"),ed=e=>{et(t=>{let s=new Set(t);return s.has(e)?s.delete(e):s.add(e),s}),L(!1)},eu=async()=>{await eY(n,y,M,z,H,et,ea,em,F,eC)},em=(0,r.useCallback)(async()=>{if(X.current)return;X.current=!0;let t=e?"pveItemsCache":"pvpItemsCache",s=e?"/api/pve-items":"/api/pvp-items";try{Q(!0);let{data:e,timestamp:a}=await ef(s,t);G(e),el(a)}catch(e){$(e instanceof Error?"Fetch Error: ".concat(e.message):"An error occurred")}finally{Q(!1)}},[e]);(0,r.useEffect)(()=>{if(er){let e=setInterval(()=>{let t=er+6e5-Date.now();t<=0?(en("Refresh Available"),clearInterval(e)):en("".concat(Math.floor(t%36e5/6e4),"m ").concat(Math.floor(t%6e4/1e3),"s"))},1e3);return()=>clearInterval(e)}},[er]),(0,r.useEffect)(()=>{em()},[em,e]);let ef=async(e,t)=>{try{let s=localStorage.getItem(t);if(s){let{data:e,timestamp:a}=JSON.parse(s);if(Date.now()-a<6e5)return console.log("Using cached data for ".concat(t)),{data:e,timestamp:a}}console.log("Fetching fresh data for ".concat(t));let a=await fetch(e);if(!a.ok){let e=await a.json();throw Error(e.error||"Failed to fetch data for ".concat(t))}let{data:r,timestamp:l}=await a.json();return localStorage.setItem(t,JSON.stringify({data:r,timestamp:l})),{data:r,timestamp:l}}catch(e){throw console.error("Error in fetchCachedData for ".concat(t,":"),e),e}},eh=(0,r.useMemo)(()=>{let e=[...W.filter(e=>0===_.length||(Array.isArray(e.tags)?e.tags.some(e=>_.includes(e)):_.includes(e.tags||"")))];return"az"===C?e.sort((e,t)=>e.name.localeCompare(t.name)):"base-value"===C?e.sort((e,t)=>e.basePrice-t.basePrice):"ratio"===C&&e.sort((e,t)=>t.basePrice/t.price-e.basePrice/t.price),e},[W,C,_]),ex=(0,r.useCallback)((e,t,s)=>{let a=t+5e3,r=Array(s+1).fill(null).map(()=>Array(a+1).fill(1/0)),l=Array(s+1).fill(null).map(()=>Array(a+1).fill(null).map(()=>[]));r[0][0]=0;for(let t=1;t<=s;t++)for(let s=0;s<e.length;s++){let{basePrice:i,price:n}=e[s];for(let e=i;e<=a;e++)r[t-1][e-i]+n<r[t][e]&&(r[t][e]=r[t-1][e-i]+n,l[t][e]=[...l[t-1][e-i],s])}let i=[];for(let e=1;e<=s;e++)for(let s=t;s<=a;s++)r[e][s]!==1/0&&i.push({c:e,v:s,cost:r[e][s]});i.sort((e,t)=>e.cost-t.cost);let n=i.slice(0,Math.min(5,i.length)),o=n[Math.floor(Math.random()*n.length)];return o?{selected:l[o.c][o.v].map(t=>e[t]),totalFleaCost:o.cost}:{selected:[],totalFleaCost:0}},[]),ep=(0,r.useMemo)(()=>s.reduce((e,t)=>e+((null==t?void 0:t.basePrice)||0),0),[s]),eg=(0,r.useMemo)(()=>s.map(e=>e?es[e.uid]||e.price:0),[s,es]),eb=(0,r.useMemo)(()=>eg.reduce((e,t)=>e+t,0),[eg]),ey=ep>=Y,eN=(e,t,a)=>{let r=[...s];if(r[t]=e,n(r),L(!1),e&&void 0!==a)null!==a?ea(t=>({...t,[e.uid]:a})):ea(t=>{let s={...t};return delete s[e.uid],s});else if(!e){var l;let e={...es},a=null===(l=s[t])||void 0===l?void 0:l.uid;a&&delete e[a],ea(e)}},ew=e=>{let t=[...g];t[e]=!t[e],y(t)},eS=(0,r.useCallback)(async()=>{c(!0);try{let e=eh.filter(e=>e.price>0);e=e.filter(e=>e.basePrice>=.1*Y).filter(e=>!e.bannedOnFlea).filter(e=>new Date(e.updated).getTime()>Date.now()-864e5).filter(e=>!K.has(e.uid)).sort((e,t)=>t.basePrice/t.price-e.basePrice/t.price).slice(0,100);let t=s.reduce((e,t,s)=>e+(g[s]&&t?t.basePrice:0),0),a=Math.max(0,Y-t),r=[...e.filter(e=>!s.some((t,s)=>g[s]&&(null==t?void 0:t.uid)===e.uid)).map(e=>{let t=es[e.uid];return void 0!==t?{...e,price:t}:e})].sort(()=>Math.random()-.5),l=ex(r,a,5-g.filter(Boolean).length);if(0===l.selected.length&&a>0){alert("No combination of items meets the remaining threshold.");return}let i=[...s],o=0;for(let e=0;e<5;e++)!g[e]&&(i[e]=l.selected[o]||null,o++);let c={...es};for(let e=0;e<5;e++){let t=i[e];t&&es[t.uid]&&(c[t.uid]=es[t.uid])}n(i),ea(c),L(!0)}catch(e){console.error("Auto Select Error:",e),L(!1)}finally{c(!1)}},[eh,Y,K,g,s,es,ex]),ek=e=>{let t=s[e];if(t){let e="".concat(t.name);navigator.clipboard.writeText(e).then(()=>{console.log("Copied ".concat(t.name," to clipboard.")),setTimeout(()=>console.log("Clipboard reset."),500)},e=>{console.error("Failed to copy text: ",e)})}},{toast:eC}=eT(),eE=(0,r.useRef)(!1);if((0,r.useEffect)(()=>{if(ey&&!eE.current){let e="Threshold Met - ".concat(Y.toLocaleString(),"!");eC({title:e,description:Y>=4e5?"25% chance for 6-hour cooldown otherwise 14-hour cooldown for high-value items.":Y>=35e4?"14-hour cooldown for high-value items.":"You have met the threshold. A cooldown has been triggered."}),eE.current=!0}ey||(eE.current=!1)},[ey,Y,eC]),(0,r.useEffect)(()=>{localStorage.getItem("appVersion")!==eG&&(eR(),localStorage.setItem("appVersion",eG))},[]),q)return(0,a.jsx)("div",{className:"h-screen flex items-center justify-center bg-gray-900 text-red-500",children:(0,a.jsxs)("p",{children:["Error: ",q]})});let eR=async()=>{localStorage.clear();try{(await fetch("/api/expire-cookies")).ok?console.log("Cookies cleared successfully"):console.error("Failed to clear cookies")}catch(e){console.error("Error clearing cookies:",e)}window.location.reload()};return(0,a.jsxs)("div",{className:"min-h-screen grid place-items-center bg-my_bg_image bg-no-repeat bg-cover text-gray-100 p-4 overflow-auto ",children:[!J&&(0,a.jsx)(eB,{}),(0,a.jsxs)(i.Zb,{className:"bg-gray-800 border-gray-700 shadow-lg max-h-fit overflow-auto py-8 px-6 relative w-full max-w-2xl mx-auto bg-opacity-50 ",children:[(0,a.jsxs)("div",{className:"mt-4 text-center text-gray-400 text-sm",children:[(0,a.jsxs)("div",{children:["Current Version: ",eG]}),(0,a.jsxs)("div",{children:["Next Update: ",ei]})]}),(0,a.jsxs)(w,{children:[(0,a.jsx)(S,{asChild:!0,children:(0,a.jsxs)("div",{className:"absolute top-6 left-4 animate-float hover:text-green-300 text-yellow-500 flex-row items-center justify-center",children:[(0,a.jsx)(h.Z,{id:"help",className:"h-10 w-10"}),(0,a.jsx)("div",{className:"text-yellow-500 text-sm text-center",children:"Help"})]})}),(0,a.jsx)(E,{className:"flex bg-gray-800 sm:max-w-[600px] sm:max-h-[90vh] max-h-[90vh] w-full mx-auto",children:(0,a.jsxs)(R,{children:[(0,a.jsx)(T,{children:"How to Use"}),(0,a.jsx)(D,{className:"text-left",children:(0,a.jsxs)("ul",{children:[(0,a.jsx)("li",{children:"1️⃣ Toggle between PVE and PVP modes to use correct flea prices."}),(0,a.jsx)("li",{children:"2️⃣ Edit threshold (see below for suggestions)"}),(0,a.jsx)("li",{children:"3️⃣ Select items from the dropdown to calculate the total sacrifice value."}),(0,a.jsx)("li",{children:"4️⃣ Use Auto Pick to find the cheapest combination meeting the threshold."}),(0,a.jsx)("li",{children:"5️⃣ Ensure the total value meets the cultist threshold (base value)."}),(0,a.jsx)("li",{children:"6️⃣ If the threshold is met, sacrifice the items."}),(0,a.jsx)(f,{className:"mt-3 mb-3"}),(0,a.jsx)("li",{children:"\uD83D\uDD34 BUG: 14-hour result has known bug which can result in an empty reward."}),(0,a.jsx)("li",{children:"\uD83D\uDFE2 Note: ≥400k base value = 6h (25% success) | Active tasks/hideout item"}),(0,a.jsx)("li",{children:"\uD83D\uDFE2 Note: ≥350,001 base value = 14h | High-Value item"}),(0,a.jsx)("li",{children:"\uD83D\uDFE2 Note: Flea prices are latest prices provided by tarkov-market."}),(0,a.jsx)(f,{className:"mt-3 mb-1"}),(0,a.jsx)("li",{children:"\uD83D\uDC96 Thank you for checking out the app - Wilsman77"})]})})]})})]}),(0,a.jsx)(x.Z,{id:"settings",className:"absolute top-5 right-6 h-10 w-10 hover:text-green-300 text-yellow-500 cursor-pointer",onClick:()=>k(!0)}),(0,a.jsx)("div",{className:"absolute top-15 right-6 text-orange-500 text-sm text-center",children:"Settings"}),(0,a.jsxs)(i.aY,{className:"p-6",children:[(0,a.jsxs)("h1",{className:"sm:text-3xl text-xl font-bold mb-2 text-center text-red-500 text-nowrap flex items-center justify-center w-full",children:[(0,a.jsx)(v.default,{src:"/images/Cultist-Calulator.webp",alt:"Cultist calculator logo",width:400,height:128}),(0,a.jsx)("div",{className:"ml-2",children:(0,a.jsx)(j,{})})]}),(0,a.jsxs)("div",{id:"pvp-toggle",className:"flex items-center justify-center mb-6 w-full",children:[(0,a.jsx)("span",{className:"text-gray-300",children:"PVP"}),(0,a.jsx)(b,{checked:e,onCheckedChange:e=>{t(e),n([,,,,,].fill(null)),y([,,,,,].fill(!1)),ea({}),et(new Set),L(!1),X.current=!1,eE.current=!1;try{localStorage.removeItem(eW)}catch(e){console.error("Error removing overriddenPrices from localStorage",e)}},className:"mx-2 data-[state=checked]:bg-white data-[state=unchecked]:bg-white"}),(0,a.jsx)("span",{className:"text-gray-300",children:"PVE"})]}),(0,a.jsx)("div",{id:"threshold",className:"flex items-center justify-center mb-4 w-full",children:(0,a.jsx)(ec,{value:Y,onChange:e=>{H(e),eo.Z.set("userThreshold",e.toString(),{expires:365}),eE.current=!1}})}),(0,a.jsxs)("div",{className:"h-full w-full flex flex-col justify-center items-center",children:[o?(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("p",{className:"text-gray-300 mb-2",children:"Calculating best combination..."}),(0,a.jsxs)("div",{className:"lds-ellipsis",children:[(0,a.jsx)("div",{}),(0,a.jsx)("div",{}),(0,a.jsx)("div",{}),(0,a.jsx)("div",{})]})]}):(0,a.jsx)(I,{children:(0,a.jsx)("div",{className:"flex flex-col justify-center items-center",children:(0,a.jsxs)("div",{className:"flex justify-center mb-4",children:[(0,a.jsxs)(P,{children:[(0,a.jsx)(A,{asChild:!0,children:(0,a.jsx)(u,{id:"auto-select",onClick:eS,disabled:o,className:"bg-blue-500 hover:bg-blue-700 md:min-w-[300px] sm:min-w-[300px] mr-2",children:Z?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(p.Z,{className:"mr-1 h-5 w-5"}),"Reroll"]}):"AUTO SELECT"})}),(0,a.jsx)(O,{children:Z?"Reroll to find a new combination":"Automatically select best items"})]}),(0,a.jsxs)(P,{children:[(0,a.jsx)(A,{asChild:!0,children:(0,a.jsx)(l.default,{href:"/recipes",prefetch:!1,children:(0,a.jsx)(u,{className:"bg-red-500 hover:bg-red-700",children:"Recipes"})})}),(0,a.jsx)(O,{children:"View recipes"})]})]})})}),(0,a.jsx)("div",{className:"space-y-2 w-full",children:(0,a.jsxs)("div",{id:"search-items",children:[" ",J?[,,,,,].fill(0).map((e,t)=>(0,a.jsx)(ej,{className:"h-10 w-full mb-2 bg-slate-500"},"skeleton-".concat(t))):0===eh.length?(0,a.jsxs)("div",{className:"text-center text-gray-400 mt-4",children:["No items available at this time. Please wait for the next update in ",ei,"."]}):s.map((e,t)=>(0,a.jsxs)(r.Fragment,{children:[(0,a.jsx)(ee,{items:eh,selectedItem:e,onSelect:(e,s)=>eN(e,t,s),onCopy:()=>ek(t),onPin:()=>ew(t),isPinned:g[t],overriddenPrice:e?es[e.uid]:void 0,isAutoPickActive:Z,overriddenPrices:es,isExcluded:K.has((null==e?void 0:e.uid)||""),onToggleExclude:()=>e&&ed(e.uid),excludedItems:K}),t<s.length-1&&(0,a.jsx)(f,{className:"my-2"})]},"selector-".concat(t)))]})}),(0,a.jsxs)(I,{children:[(0,a.jsxs)(P,{children:[(0,a.jsx)(A,{asChild:!0,children:(0,a.jsx)(u,{id:"clear-item-fields",className:"bg-red-500 hover:bg-red-700 text-secondary hover:text-primary mt-2 w-full",onClick:function(){n([,,,,,].fill(null)),y([,,,,,].fill(!1)),L(!1),eE.current=!1},disabled:s.every(e=>null===e),children:"Clear Selected Items"})}),(0,a.jsx)(O,{children:"Clears ALL item fields"})]}),(0,a.jsxs)(P,{children:[(0,a.jsx)(A,{asChild:!0,children:(0,a.jsx)(u,{id:"reset-overrides",className:"bg-red-500 hover:bg-red-700 text-secondary hover:text-primary mt-2 w-full",onClick:()=>{let e=Object.keys(es).length,t=K.size;ea({}),et(new Set),L(!1),eE.current=!1;try{localStorage.removeItem(eW)}catch(e){console.error("Error removing overriddenPrices from localStorage",e)}eC({title:"Reset Successful",description:"".concat(e," overrides and ").concat(t," excluded items have been cleared.")})},disabled:0===Object.keys(es).length&&0===K.size,children:"Reset Overrides"})}),(0,a.jsx)(O,{children:"Reset overrides and exclusions"})]})]})]}),(0,a.jsxs)("div",{className:"text-center text-sm mt-2 text-gray-400",children:[Object.keys(es).length," overrides and"," ",K.size," exclusions currently active"]}),(0,a.jsxs)("div",{id:"sacrifice-value",className:"mt-6 text-center w-full",children:[(0,a.jsx)("h2",{className:"text-3xl font-bold mb-2 text-gray-300",children:"Current Total"}),J?(0,a.jsx)(ej,{className:"h-16 w-3/4 mx-auto"}):(0,a.jsxs)("div",{className:"text-6xl font-extrabold ".concat(ey?"text-green-500 animate-pulse":"text-red-500 animate-pulse"),children:["₽",ep.toLocaleString()]}),!ey&&(0,a.jsxs)("div",{className:"text-red-500 mt-2",children:["₽",(Y-ep).toLocaleString()," Needed to meet threshold"]}),(0,a.jsx)("div",{className:"mt-6",children:(0,a.jsxs)("div",{className:"text-sm font-semibold text-gray-400",children:["Total flea Cost ≈"," ",(0,a.jsxs)("span",{className:Object.keys(es).length>0?"font-bold":"",children:["₽",eb.toLocaleString()]})]})})]})]}),(0,a.jsx)(f,{className:"my-1"}),(0,a.jsxs)("footer",{className:"mt-4 text-center text-gray-400 text-sm w-full",children:[(0,a.jsx)("a",{href:"https://tarkov-market.com",target:"_blank",rel:"noopener noreferrer",className:"hover:text-gray-300 transition-colors",children:"Data provided by Tarkov Market"}),(0,a.jsxs)("div",{className:"text-center mt-1",children:["Credit to"," ",(0,a.jsx)("a",{href:"https://bio.link/verybadscav",target:"_blank",rel:"noopener noreferrer",className:"text-blue-500 hover:text-blue-700",children:"VeryBadSCAV"})," ","for helping with this tool."]}),(0,a.jsx)("div",{className:"text-center mt-1",children:"\uD83D\uDD25 Made by Wilsman77 \uD83D\uDD25"}),(0,a.jsxs)("div",{className:"flex justify-center mt-4 space-x-4",children:[(0,a.jsx)("a",{href:"https://www.buymeacoffee.com/wilsman77",target:"_blank",rel:"noopener noreferrer",children:(0,a.jsx)(v.default,{src:"https://cdn.buymeacoffee.com/buttons/v2/default-blue.png",alt:"Buy Me A Coffee",width:120,height:30,priority:!0})}),(0,a.jsx)(u,{onClick:()=>m(!0),className:"bg-yellow-500 hover:bg-yellow-600 text-white font-semibold py-2 px-4 rounded-lg shadow-md transition duration-300 ease-in-out",children:"Feedback"})]}),(0,a.jsx)("div",{className:"mt-4",children:(0,a.jsx)("div",{className:"mt-4",children:(0,a.jsx)(r.Suspense,{fallback:(0,a.jsx)("div",{children:"Loading ad..."}),children:(0,a.jsx)(eH,{dataAdFormat:"auto",dataFullWidthResponsive:!0,dataAdSlot:"1022212363"})})})})]})]}),(0,a.jsx)("div",{className:"background-credit",children:"Background by Zombiee"}),d&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 p-4",children:(0,a.jsx)(V,{onClose:()=>m(!1)})}),N&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 p-4",children:(0,a.jsx)(ev,{onClose:()=>k(!1),onSortChange:B,currentSortOption:C,selectedCategories:_,onCategoryChange:U,allCategories:["Barter","Containers","Crates","Currency","Gear","Keys","Magazines","Maps","Meds","Provisions","Quest_items","Repair","Sights","Special_equipment","Suppressors","Tactical_devices","Weapon","Weapon_parts"],onHardReset:eu})}),(0,a.jsx)(eV,{})]})}},6013:function(e,t,s){"use strict";s.d(t,{Ol:function(){return n},Zb:function(){return i},aY:function(){return c},eW:function(){return d},ll:function(){return o}});var a=s(7437),r=s(2265),l=s(7440);let i=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,l.cn)("rounded-xl border bg-card text-card-foreground shadow",s),...r})});i.displayName="Card";let n=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,l.cn)("flex flex-col space-y-1.5 p-6",s),...r})});n.displayName="CardHeader";let o=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("h3",{ref:t,className:(0,l.cn)("font-semibold leading-none tracking-tight",s),...r})});o.displayName="CardTitle",r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("p",{ref:t,className:(0,l.cn)("text-sm text-muted-foreground",s),...r})}).displayName="CardDescription";let c=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,l.cn)("p-6 pt-0",s),...r})});c.displayName="CardContent";let d=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,l.cn)("flex items-center p-6 pt-0",s),...r})});d.displayName="CardFooter"},6294:function(e,t,s){"use strict";s.d(t,{Bw:function(){return h},DI:function(){return c},Jk:function(){return f},Ph:function(){return o},Pn:function(){return m},Ql:function(){return p},i4:function(){return u},ki:function(){return d},n5:function(){return x}});var a=s(7437),r=s(2265),l=s(4867),i=s(4360),n=s(7440);let o=i.fC,c=i.ZA,d=i.B4,u=r.forwardRef((e,t)=>{let{className:s,children:r,...o}=e;return(0,a.jsxs)(i.xz,{ref:t,className:(0,n.cn)("flex h-9 w-full items-center justify-between whitespace-nowrap rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",s),...o,children:[r,(0,a.jsx)(i.JO,{asChild:!0,children:(0,a.jsx)(l.jnn,{className:"h-4 w-4 opacity-50"})})]})});u.displayName=i.xz.displayName;let m=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(i.u_,{ref:t,className:(0,n.cn)("flex cursor-default items-center justify-center py-1",s),...r,children:(0,a.jsx)(l.g8U,{})})});m.displayName=i.u_.displayName;let f=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(i.$G,{ref:t,className:(0,n.cn)("flex cursor-default items-center justify-center py-1",s),...r,children:(0,a.jsx)(l.v4q,{})})});f.displayName=i.$G.displayName;let h=r.forwardRef((e,t)=>{let{className:s,children:r,position:l="popper",...o}=e;return(0,a.jsx)(i.h_,{children:(0,a.jsxs)(i.VY,{ref:t,className:(0,n.cn)(" relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===l&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",s),position:l,...o,children:[(0,a.jsx)(m,{}),(0,a.jsx)(i.l_,{className:(0,n.cn)("p-1","popper"===l&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:r}),(0,a.jsx)(f,{})]})})});h.displayName=i.VY.displayName;let x=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(i.__,{ref:t,className:(0,n.cn)("px-2 py-1.5 text-sm font-semibold",s),...r})});x.displayName=i.__.displayName;let p=r.forwardRef((e,t)=>{let{className:s,children:r,...o}=e;return(0,a.jsxs)(i.ck,{ref:t,className:(0,n.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),...o,children:[(0,a.jsx)("span",{className:"absolute right-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(i.wU,{children:(0,a.jsx)(l.nQG,{className:"h-4 w-4"})})}),(0,a.jsx)(i.eT,{children:r})]})});p.displayName=i.ck.displayName,r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(i.Z0,{ref:t,className:(0,n.cn)("-mx-1 my-1 h-px bg-muted",s),...r})}).displayName=i.Z0.displayName},7440:function(e,t,s){"use strict";s.d(t,{D:function(){return i},cn:function(){return l}});var a=s(4839),r=s(6164);function l(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,r.m6)((0,a.W)(t))}function i(e){let t=new Date(e),s=new Date().getTime()-t.getTime(),a=Math.floor(s/6e4);if(a<60)return"".concat(a," minute").concat(a>1?"s":""," ago");let r=Math.floor(s/36e5);if(r<24)return"".concat(r," hour").concat(r>1?"s":""," ago");let l=Math.floor(s/864e5);return l<7?"".concat(l," day").concat(l>1?"s":""," ago"):t.toLocaleDateString()}}},function(e){e.O(0,[310,802,51,971,23,744],function(){return e(e.s=5074)}),_N_E=e.O()}]);